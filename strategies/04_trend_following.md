# 趋势跟踪策略

> **类型**：交易策略（方向性策略）
> **核心逻辑**：跟随价格趋势，涨时做多，跌时做空
> **理论基础**：[趋势与动量策略](../core/05_trend_and_momentum.md)
> **与网格交易的关系**：逻辑相反——趋势延续 vs 区间震荡

---

## 核心概念定义

### 什么是趋势跟踪？

**趋势跟踪 (Trend Following)** 是一种交易策略，核心规则是：**不预测方向，只跟随方向——价格上涨就做多，价格下跌就做空**。

这个理念可以追溯到 200 年前。古典经济学家 David Ricardo 的投资格言是：

> "Cut short your losses; let your profits run on."
>
> 截断亏损，让利润奔跑。

趋势跟踪者相信：
- 市场趋势一旦形成，往往会延续一段时间
- 我们无法预测趋势何时开始或结束
- 但我们可以在趋势形成后跟随它，在趋势结束时退出

**与其他策略的对比**：

| 维度 | 趋势跟踪 | 网格交易 | 价值投资 |
|-----|---------|---------|---------|
| **核心假设** | 趋势会延续 | 价格会震荡 | 价格会回归价值 |
| **方向判断** | 跟随市场 | 不判断方向 | 逆向市场 |
| **持仓周期** | 周-月 | 分钟-天 | 年 |
| **最佳市场** | 趋势市场 | 震荡市场 | 低估市场 |
| **最差市场** | 震荡市场 | 趋势市场 | 价值陷阱 |

### 时间序列动量 vs 横截面动量

动量策略有两种形式：

| 类型 | 定义 | 比较基准 | 典型应用 |
|-----|------|---------|---------|
| **时间序列动量** | 与自身历史比较 | 过去的自己 | 趋势跟踪、CTA |
| **横截面动量** | 与其他资产比较 | 同类资产 | 股票多空策略 |

**举例**：

```
时间序列动量：
    原油过去 12 个月涨了 20%
    → 做多原油
    （与原油自己的历史比较）

横截面动量：
    股票 A 过去 12 个月涨 30%，股票 B 跌 10%
    → 买 A 卖 B
    （A 和 B 相互比较）
```

**本文聚焦时间序列动量**，即趋势跟踪。关于横截面动量，详见 [趋势与动量策略](../core/05_trend_and_momentum.md)。

---

## 一、历史与起源

### 1. Richard Donchian：趋势跟踪之父

Richard Donchian（1905-1993）被称为"趋势跟踪之父"。从 1950 年代到 1970 年代，他开发了第一个系统化的趋势跟踪方法。

**主要贡献**：
- 发明了**唐奇安通道 (Donchian Channel)**：用 N 日最高价和最低价形成通道
- 提出了**周规则**：突破 4 周高点买入，跌破 4 周低点卖出
- 强调**规则化、纪律化**的交易方法

Donchian 的理念影响了整整一代趋势跟踪者，包括后来的海龟交易员。

### 2. 海龟实验（1983）

1983 年，两位传奇交易员 Richard Dennis 和 William Eckhardt 进行了一场著名的实验：

**背景**：Dennis 相信交易可以被教会，Eckhardt 认为优秀交易员是天生的。为了解决这个分歧，Dennis 决定招募一群普通人，教他们交易。

**过程**：
1. 从 1000+ 申请者中选出 14 人（后扩展到 23 人）
2. 进行两周的培训，教授一套完整的交易规则
3. 给每人 50 万到 200 万美元的资金进行交易
4. 实验持续 5 年

**结果**：海龟们在 5 年内为 Dennis 赚取了超过 **1.75 亿美元**。

**核心启示**：

> 规则可以教会，但纪律难以坚守。

海龟法则后来被公开（原海龟 Curtis Faith 在 2007 年出版了 *Way of the Turtle*），成为趋势跟踪的经典教材。那些失败的海龟，往往不是不懂规则，而是无法在连续亏损时坚持执行规则。

### 3. 管理期货（CTA）行业

海龟实验后，趋势跟踪策略在机构投资领域蓬勃发展，形成了**管理期货 (CTA, Commodity Trading Advisors)** 行业。

**主要机构**：
- AQR Capital Management
- Winton Group
- Man AHL
- Aspect Capital

**行业规模**：截至 2024 年，管理期货行业管理资产超过 **3000 亿美元**。

**CTA 的典型特征**：
- 交易多种期货合约（商品、股指、债券、外汇）
- 以趋势跟踪为主（约占策略的 70%）
- 使用系统化、量化的方法
- 可做多也可做空

---

## 二、理论基础

趋势跟踪策略的有效性有坚实的学术支持。

### 1. 核心证据

**Moskowitz, Ooi & Pedersen (2012)** 在 *Journal of Financial Economics* 发表的 "Time Series Momentum" 是奠基性研究：

- **样本**：58 种流动性期货合约（1985-2009）
- **发现**：过去 12 个月收益可以预测下个月收益
- **策略**：做多过去收益为正的资产，做空过去收益为负的资产
- **结果**：显著的正 Alpha，与传统因子低相关

**Hurst, Ooi & Pedersen (2017)** 的 "A Century of Evidence on Trend-Following Investing" 将证据追溯到 **1880 年**：

| 发现 | 说明 |
|-----|------|
| 每个十年都有正收益 | 1880-2016 年间无例外 |
| 危机时表现优异 | 10 次最大危机中 8 次正收益 |
| 与传统资产低相关 | 与股票、债券的相关性接近 0 |

### 2. 为什么趋势会延续？

**行为金融解释**：

```
新信息到来
    ↓
投资者反应不足（锚定效应 + 保守偏差）
    ↓
价格缓慢调整
    ↓
形成趋势
    ↓
动量交易者跟进
    ↓
趋势延续
    ↓
最终过度反应
    ↓
趋势反转
```

**市场结构解释**：
- **央行干预**：减缓汇率和利率的调整速度
- **对冲者**：企业对冲不以盈利为目的，为投机者提供收益来源
- **机构约束**：大型机构无法快速调仓，信息纳入需要时间

详细理论分析见 [趋势与动量策略](../core/05_trend_and_momentum.md)。

---

## 三、信号生成方法

趋势跟踪的核心问题是：**如何识别趋势？**

### 1. 通道突破类

**唐奇安通道 (Donchian Channel)**：

```
上轨 = 过去 N 日的最高价
下轨 = 过去 N 日的最低价

信号：
    价格突破上轨 → 做多
    价格跌破下轨 → 做空
```

**海龟法则**使用两个系统：

| 系统 | 入场 | 出场 | 特点 |
|-----|------|------|------|
| System 1（短期） | 突破 20 日高/低点 | 突破 10 日低/高点 | 更敏感，更多交易 |
| System 2（长期） | 突破 55 日高/低点 | 突破 20 日低/高点 | 更稳健，更少交易 |

**例子**：

```
假设某商品过去 20 日的价格区间是 95-105 元
当前价格突破 105 元（20 日高点）
→ 触发 System 1 做多信号

持仓期间，价格最高涨到 120 元，然后回落
当价格跌破 110 元（10 日低点）时
→ 触发 System 1 出场信号
```

### 2. 移动平均类

**单均线策略**：

```
价格 > N 日均线 → 做多
价格 < N 日均线 → 做空

常用参数：200 日均线（判断长期趋势）
```

**双均线交叉策略**：

```
快线（短期均线）上穿慢线（长期均线）→ 做多（金叉）
快线下穿慢线 → 做空（死叉）

常用参数：10/50 日，50/200 日
```

**MACD (Moving Average Convergence Divergence)**：

```
MACD 线 = 12 日 EMA - 26 日 EMA
信号线 = MACD 线的 9 日 EMA

MACD 线上穿信号线 → 做多
MACD 线下穿信号线 → 做空
```

**均线类策略的权衡**：

| 参数 | 短均线 | 长均线 |
|-----|--------|--------|
| **响应速度** | 快 | 慢 |
| **假信号** | 多 | 少 |
| **滞后程度** | 小 | 大 |
| **震荡损耗** | 大 | 小 |
| **趋势捕获** | 捕获短趋势 | 只捕获长趋势 |

没有完美的参数——短均线噪音多，长均线滞后大。

### 3. 时间序列动量

最简单的趋势信号：

```
过去 12 个月收益 > 0 → 做多
过去 12 个月收益 < 0 → 做空

每月末重新计算
```

**Moskowitz 等人的研究**表明，12 个月回望期是实证中最稳健的选择：
- 太短（1-3 个月）：噪音大，反转风险
- 太长（>12 个月）：信号滞后，错过拐点
- 12 个月：平衡噪音过滤和响应速度

### 4. 快慢信号组合

单一信号有局限，组合多个信号可以提升稳健性。

**AQR 的方法**：同时使用短期（1 个月）、中期（3-6 个月）、长期（12 个月）信号，综合判断。

**快慢信号的四种状态**：

| 状态 | 慢信号（12月） | 快信号（1月） | 含义 |
|-----|---------------|--------------|------|
| **Bull** | + | + | 强上涨趋势 |
| **Correction** | + | - | 上涨中的回调 |
| **Bear** | - | - | 强下跌趋势 |
| **Rebound** | - | + | 下跌中的反弹 |

**研究发现**：
- 当快慢信号**一致**时，趋势更可靠
- 当快慢信号**不一致**时，可能处于拐点
- 高波动环境下，快信号更有价值
- 低波动环境下，慢信号更有价值

---

## 四、仓位管理

趋势跟踪不仅要判断方向，还要决定下多大的注。

趋势跟踪的仓位管理核心是**金字塔加仓**——在盈利的头寸上逐步增加仓位。这与趋势跟踪共享同一假设：趋势会延续。详见 [金字塔加仓策略](02_pyramiding.md)。

本节聚焦于仓位计算的技术细节。

### 1. 波动率调整（ATR 仓位）

**问题**：不同资产波动率不同。如果对原油和黄金下同样的名义仓位，实际风险暴露完全不同。

**解决方案**：用波动率标准化仓位。

**ATR (Average True Range)** 衡量资产的日均波动幅度。

```
仓位 = 账户风险 / (ATR × 乘数)

例子：
    账户资金 = 100 万
    每笔交易风险 = 1%（即 1 万）
    原油 ATR = 2 美元
    止损设为 2 倍 ATR = 4 美元

    仓位 = 10,000 / 4 = 2,500 桶
```

**海龟法则的 N 值系统**：

```
N = 20 日 ATR
单位仓位 = 账户 × 1% / (N × 合约乘数)

每个品种最多持有 4 个单位
高度相关品种合计不超过 6 个单位
总持仓不超过 12 个单位
```

### 2. 波动率目标

**问题**：市场波动率会变化。低波动时仓位太小，高波动时风险太大。

**解决方案**：动态调整杠杆，使组合波动率保持稳定。

```
目标波动率 = 10%
当前组合波动率 = 15%

杠杆调整 = 10% / 15% = 0.67
→ 将所有仓位降低到原来的 67%
```

**实证发现**：波动率目标可以显著改善趋势跟踪的风险调整收益，特别是在避免动量崩溃方面。

### 3. 相关性考虑

同时交易高相关的品种会放大风险。

**例子**：
- 原油和天然气高度相关
- 如果两者都触发做多信号，实际上是双倍暴露于能源风险
- 应该降低每个品种的仓位，或只交易其中一个

**处理方法**：
- 计算品种间相关性矩阵
- 高相关品种的仓位之和设上限
- 或使用风险平价方法，使每个风险因子的贡献相等

---

## 五、出场策略

入场只是开始，出场决定最终盈亏。

### 1. 移动止损（追踪止损）

移动止损随着价格有利移动而调整，锁定部分利润。

| 类型 | 规则 | 优点 | 缺点 |
|-----|------|------|------|
| **固定百分比** | 从最高点回撤 X% 止损 | 简单 | 不适应波动率 |
| **ATR 止损** | 最高点 - N 倍 ATR | 适应波动率 | 参数敏感 |
| **通道止损** | 跌破 N 日低点止损 | 海龟法则使用 | 可能过早/过晚 |

**海龟法则的止损**：

```
System 1：入场后止损 = 入场价 - 2N（N = ATR）
         移动止损 = 跌破 10 日低点

System 2：入场后止损 = 入场价 - 2N
         移动止损 = 跌破 20 日低点
```

**移动止损的两难**：

```
止损太紧：
    被正常波动震出
    错过大趋势

止损太松：
    回吐太多利润
    回撤太大
```

**研究发现**：移动止损的最优参数因市场而异。一些研究甚至发现，在某些情况下，不使用止损的总收益更高（但回撤也更大）。

### 2. 反向信号出场

当新的反向信号出现时出场并反向开仓。

```
当前持有多头
    ↓
价格跌破下轨（或死叉出现）
    ↓
平掉多头
    ↓
开立空头
```

**优点**：始终在场，不会错过趋势
**缺点**：震荡市中频繁反转，损耗严重

### 3. 时间止损

如果持仓一段时间后没有盈利，可能趋势判断错误。

```
规则：持仓超过 N 天且未盈利 → 出场

常用参数：10-20 天
```

**逻辑**：趋势应该在入场后不久就显现。如果迟迟不动，可能不是趋势，而是区间。

---

## 六、风险与陷阱

### 1. 假突破/震荡损耗（Whipsaw）

**定义**：入场后价格立即反向，触发止损。

```
场景：
    价格突破 20 日高点 → 触发做多
    买入后价格回落
    跌破止损位
    亏损出场

    几天后价格再次突破
    再次买入
    再次回落
    再次止损

    反复多次...
```

**为什么无法避免**：
- 不是所有突破都会形成趋势
- 事前无法区分真突破和假突破
- 过滤假突破的方法也会过滤真突破

**正确态度**：

> 震荡损耗是趋势跟踪的成本，就像保险费一样。你付出频繁的小亏损，换取偶尔的大盈利。

**实证**：趋势跟踪的典型胜率只有 **35-40%**，但盈亏比达到 **2-3 倍**。亏损频繁但金额小，盈利少见但金额大。

### 2. 动量崩溃

趋势跟踪最大的风险是**动量崩溃 (Momentum Crash)**——在趋势剧烈反转时遭受巨额亏损。

**历史案例**：

| 时期 | 背景 | 损失 |
|-----|------|------|
| 1932 年夏 | 大萧条底部反弹 | -91% |
| 2009 年 3-5 月 | 金融危机后反弹 | -73% |
| 2020 年 11 月 | 疫苗消息后反弹 | -39% |

**崩溃机制**：

```
长期熊市期间：
    防御股（低 Beta）相对抗跌 → 成为"赢家"
    周期股（高 Beta）大幅下跌 → 成为"输家"

趋势跟踪组合持仓：
    做多防御股（低 Beta）
    做空周期股（高 Beta）
    → 组合 Beta 为负

突然反转（政策刺激、疫苗消息）：
    周期股暴涨 → 做空巨亏
    防御股滞涨 → 做多收益低
    → 双向亏损
```

**预警信号**：
- 市场经历大幅下跌后
- 组合的赢家 Beta 很低（<0.5）
- 组合的输家 Beta 很高（>1.5）
- 整体组合 Beta 为负

**管理方法**：
- 高波动时降低敞口
- 与价值策略组合（价值在反转时表现好）
- 使用波动率目标
- 设置组合层面的止损

详见 [趋势与动量策略 - 动量崩溃](../core/05_trend_and_momentum.md#四动量崩溃)。

### 3. 长期表现不稳定

趋势跟踪不是稳定赚钱的策略，会经历漫长的困难期。

**"失落的十年"（2009-2018）**：
- SG Trend Index 基本持平
- 同期股票大幅上涨
- 许多投资者在这期间放弃了趋势跟踪

**原因**：
- 央行量化宽松抑制了波动
- 市场缺乏持续趋势
- "买跌"策略盛行

**教训**：
- 评估趋势跟踪需要 **2-5 年**的周期
- 短期表现可能严重偏离长期平均
- 需要有足够的信念和资本熬过困难期

### 4. 与买入持有的心理对抗

趋势跟踪在牛市中往往**跑输买入持有**。

**原因**：
- 趋势跟踪会在回调时减仓或做空
- 牛市回调后往往继续上涨
- 减仓后需要重新追入，错过部分涨幅

**心理挑战**：

```
2017 年情景：
    买入持有者：全年收益 +25%
    趋势跟踪者：全年收益 +8%

    趋势跟踪者的想法：
    "为什么我要用这么复杂的系统，还不如直接持有？"

2008 年情景：
    买入持有者：全年收益 -50%
    趋势跟踪者：全年收益 +20%

    趋势跟踪者的想法：
    "这就是我坚持的原因。"
```

**关键认知**：趋势跟踪不是为了在牛市中赚更多，而是为了在熊市中少亏甚至盈利。

---

## 七、危机 Alpha

趋势跟踪最独特的价值是**危机 Alpha**——在市场危机时提供正收益。

### 1. 历史表现

| 危机 | 时期 | 股票收益 | 趋势跟踪收益 |
|-----|------|---------|-------------|
| 互联网泡沫破裂 | 2000-2002 | -45% | +30% |
| 金融危机 | 2008 | -50% | +20% |
| 欧债危机 | 2011 | -20% | +5% |
| 新冠冲击 | 2020年3月 | -30% | +10% |
| 通胀冲击 | 2022 | -20% | +25% |

**Hurst 等人的研究**：在 1880-2016 年间 60/40 组合的 10 次最大回撤中，趋势跟踪有 **8 次录得正收益**。

### 2. 为什么危机时表现好？

**机制一：危机形成持续趋势**

```
危机初期：
    股市开始下跌
    趋势信号转空
    做空股指期货

危机发展：
    恐慌蔓延
    股市持续下跌
    空头持续盈利

危机加剧：
    投资者涌入避险资产
    债券价格上涨
    做多债券盈利
```

**机制二：凸性收益特征**

趋势跟踪的收益分布呈**正偏态**（右偏）：
- 大部分时间：小亏损或小盈利
- 极端市场：大盈利

这与股票相反（股票是负偏态——大部分时间小盈利，极端时大亏损）。

### 3. 局限性

危机 Alpha 不是万能的：

| 局限 | 说明 |
|-----|------|
| **急跌无法捕捉** | 2020年3月的暴跌太快，趋势信号来不及反应 |
| **短期危机无效** | 需要趋势持续一段时间才能获利 |
| **V 型反转亏损** | 如果危机后快速反弹，做空会亏损 |

**例子**：2020 年 3 月新冠冲击，股市在几周内暴跌 30%，然后快速反弹。趋势跟踪策略：
- 下跌初期：信号滞后，未能及时做空
- 下跌后期：信号转空，开始做空
- 反弹时期：做空亏损

最终收益为正（约 +10%），但不如预期的那么多。

---

## 八、多资产组合

趋势跟踪的一大优势是可以在**多个不相关的资产**上同时运用。

### 1. 资产类别

| 类别 | 常见品种 | 趋势特点 |
|-----|---------|---------|
| **股指期货** | S&P 500, 纳斯达克, 欧洲斯托克, 恒生 | 与宏观周期相关 |
| **债券期货** | 10年美债, 德国国债, 日本国债 | 与利率周期相关 |
| **商品期货** | 原油, 黄金, 铜, 大豆, 可可 | 供需驱动，独立于股债 |
| **外汇期货** | 欧元, 日元, 英镑, 澳元 | 央行政策驱动 |

### 2. 分散化收益

**核心发现**：不同资产类别的趋势**相关性很低**。

```
当股指在上涨趋势时：
    债券可能在下跌趋势（利率上升）
    商品可能在上涨趋势（通胀预期）
    外汇可能在震荡（无明确趋势）

结果：
    股指策略盈利
    债券策略盈利
    商品策略盈利
    外汇策略亏损

    总体：正收益，波动率降低
```

**实证**：
- 单一资产趋势跟踪：夏普比率 0.3-0.5
- 多资产趋势跟踪：夏普比率 0.7-1.0

分散化几乎将夏普比率翻倍。

### 3. 配置建议

**传统组合 + 趋势跟踪**：

研究表明，在传统 60/40（股票/债券）组合中加入趋势跟踪：

| 配置 | 年化收益 | 波动率 | 最大回撤 |
|-----|---------|--------|---------|
| 纯 60/40 | 7.5% | 10% | -35% |
| 55/35/10（加10%趋势跟踪） | 7.3% | 9% | -28% |
| 50/30/20（加20%趋势跟踪） | 7.0% | 8% | -22% |

**收益略有下降，但风险显著降低**——这正是趋势跟踪作为"保险"的价值。

---

## 九、市场状态过滤

不是所有时候都适合趋势跟踪。加入过滤条件可以提升效果。

### 1. 波动率过滤

**逻辑**：高波动时趋势更明显，但崩溃风险也更高。

```
规则示例：
    VIX < 20：正常交易
    VIX 20-30：仓位减半
    VIX > 30：暂停交易或只做空
```

**研究发现**：
- 低波动环境：慢信号更有效
- 高波动环境：快信号更有效

可以根据波动率动态调整信号速度。

### 2. 趋势强度过滤

**ADX (Average Directional Index)** 衡量趋势强度：

```
ADX < 15：无趋势（不交易）
ADX 15-25：弱趋势（谨慎交易）
ADX > 25：强趋势（正常交易）
ADX > 40：极强趋势（可能过热）
```

**逻辑**：只在趋势明确时交易，避免震荡市的损耗。

### 3. 牛熊状态判断

用长期均线判断大趋势，只做与大趋势一致的交易：

```
规则示例：
    价格 > 200 日均线（牛市）：只做多
    价格 < 200 日均线（熊市）：只做空
```

**优点**：减少逆势交易
**缺点**：可能错过拐点

---

## 十、表现预期

### 1. 典型指标

| 指标 | 说明 | 典型值 |
|-----|------|--------|
| **年化收益** | 长期平均 | 8-15% |
| **夏普比率** | 风险调整收益 | 0.5-1.0 |
| **胜率** | 盈利交易占比 | 35-45% |
| **盈亏比** | 平均盈利/平均亏损 | 2-3x |
| **最大回撤** | 历史最大亏损 | 20-30% |
| **回撤持续时间** | 恢复新高所需时间 | 1-3 年 |

### 2. 收益来源分解

趋势跟踪的收益可以分解为：

```
总收益 = 趋势收益 - 震荡损耗 - 交易成本

趋势收益：在趋势市场中捕获的利润
震荡损耗：在震荡市场中频繁止损的亏损
交易成本：佣金、滑点、冲击成本
```

**关键**：趋势收益必须大于震荡损耗和交易成本之和，策略才能盈利。

### 3. 预期管理

**需要接受的现实**：

| 现实 | 说明 |
|-----|------|
| 大部分交易是亏损的 | 胜率只有 35-40% |
| 可能连续亏损 10+ 次 | 这很正常 |
| 可能一两年不赚钱 | "失落的十年"就是例子 |
| 会跑输牛市 | 这是设计使然 |

**需要具备的信念**：

> 少数几笔大盈利会覆盖所有小亏损。
>
> 长期坚持纪律执行，终会获得正收益。
>
> 趋势跟踪的价值在熊市中体现。

---

## 核心结论

1. **趋势跟踪的本质是"承认无知"**：不预测方向，只跟随方向

2. **核心权衡是噪音过滤 vs 信号滞后**：没有完美的参数

3. **震荡损耗是必须接受的成本**：用频繁的小亏损换取偶尔的大盈利

4. **危机 Alpha 是独特价值**：在市场危机时提供正收益或对冲

5. **多资产分散是提升稳定性的关键**：不同资产的趋势低相关

6. **纪律执行是最大挑战**：规则简单，坚持困难

---

## 延伸阅读

### 相关策略

- [趋势与动量策略](../core/05_trend_and_momentum.md) — 理论基础
- [金字塔加仓策略](02_pyramiding.md) — 顺势加仓的资金管理
- [网格交易策略](03_grid_trading.md) — 与趋势跟踪相反的区间策略

### 参考文献

**核心论文**：

1. Moskowitz, T., Ooi, Y. H., & Pedersen, L. H. (2012). "Time Series Momentum." *Journal of Financial Economics*.
2. Hurst, B., Ooi, Y. H., & Pedersen, L. H. (2017). "A Century of Evidence on Trend-Following Investing." *Journal of Portfolio Management*.
3. Daniel, K., & Moskowitz, T. (2016). "Momentum Crashes." *Journal of Financial Economics*.

**推荐书籍**：

1. Faith, C. (2007). *Way of the Turtle*. — 海龟交易法则的内部视角
2. Covel, M. (2009). *Trend Following*. — 趋势跟踪策略的通俗介绍
3. Greyserman, A., & Kaminski, K. (2014). *Trend Following with Managed Futures*. — CTA 策略的全面分析
