# 网格交易策略

> **类型**：自动化交易策略
> **核心逻辑**：在价格区间内按固定间距双向挂单，靠波动获利
> **市场假设**：价格在区间内震荡
> **与马丁格尔的关系**：变体——都在逆势时增加仓位

---

## 核心概念定义

### 什么是网格交易？

**网格交易 (Grid Trading)** 是一种在预设价格区间内，按固定间距同时放置多个买单和卖单的交易策略。

**核心思想**：不预测市场方向，靠价格波动获利。

```
价格 ▲
     │
 110 │ ─────────────────── 卖出 ← 触发后获利
     │         ↗
 105 │ ─────────────────── 卖出
     │       ↗
 100 │ ═══════════════════ 基准价格（当前价）
     │     ↘
  95 │ ─────────────────── 买入
     │       ↘
  90 │ ─────────────────── 买入 ← 触发后持有
     │
     └─────────────────────────▶ 时间
```

**基本流程**：

1. 设定价格区间（如 90-110 元）和网格数量（如 5 格）
2. 在基准价格上方设置卖出订单（105、110 元）
3. 在基准价格下方设置买入订单（95、90 元）
4. 价格下跌触发买入 → 价格回升触发卖出 → 赚取差价
5. 循环往复，不断获利

**与趋势策略的本质区别**：

| 维度 | 趋势策略 | 网格交易 |
|-----|---------|---------|
| **核心假设** | 趋势会延续 | 价格会震荡 |
| **方向判断** | 必须判断方向 | 不需要判断方向 |
| **盈利来源** | 大趋势 | 小波动 |
| **持仓方式** | 单向持仓 | 双向挂单 |
| **最佳市场** | 趋势市 | 震荡市 |

### 网格交易的直觉解释

想象你在菜市场卖水果：

- 你设定规则：苹果跌到 5 元就买 10 斤，涨到 6 元就卖出
- 如果苹果价格在 5-6 元之间来回波动，你每个来回赚 10 元
- 你不需要预测苹果是涨还是跌，只需要它"动起来"

**网格交易就是这个逻辑的自动化版本**——在多个价位同时设置买卖订单，价格无论涨跌都能触发交易。

### 为什么叫"网格"？

因为订单在价格图上呈现网格状分布：

```
价格 ▲
     │
 115 │──●──────────────────●──  ← 第 5 格
 110 │──●──────────────────●──  ← 第 4 格
 105 │──●──────────────────●──  ← 第 3 格
 100 │══●══════════════════●══  ← 基准（第 2 格）
  95 │──●──────────────────●──  ← 第 1 格
  90 │──●──────────────────●──  ← 第 0 格
     │
     └─────────────────────────▶ 时间
         网格间距 = 5 元
```

每条水平线就是一个"网格"，价格穿越网格时触发交易。

---

## 一、网格交易有效吗？

在深入讨论策略细节之前，先回答关键问题：**网格交易是否真的能赚钱？**

### 1. 数学上的期望值为零

**理论分析**表明，在简单假设下（价格涨跌概率各 50%，不考虑手续费），网格交易的期望收益为零。

> "我们的研究表明，在没有任何市场趋势洞察的情况下，网格交易的期望值实际上为零。这意味着在考虑交易费用后，投资者面临亏损的高风险。"
> —— arXiv (2025)

**数学证明概要**：

设网格数为 n，价格每次涨跌幅度相等，概率各 50%：

- 期望交易次数 = n²/4
- 必需盈利次数 = n²/8 - n/4
- **期望收益 = 0**

**直觉解释**：网格交易本质上是"低买高卖"，但在随机游走的市场中，低买后不一定能高卖——价格可能继续下跌。长期来看，盈利和亏损相互抵消。

### 2. 与赌徒破产问题的关联

澳大利亚南昆士兰大学的 Taranto & Khan (2020) 将网格交易问题 (GTP) 与经典的**赌徒破产问题 (GRP)** 联系起来：

> "双向网格交易策略在短期内可以超越许多其他交易算法，但**长期来看几乎必然导致账户破产**。"
> —— Taranto & Khan (2020)

**核心发现**：

1. **亏损按三角数列累积**

当价格单向移动（趋势市场）时，亏损不是线性增长，而是按三角数列累积：

```
价格上涨 n 格时的累计亏损（做空方向）：
n = 1: 亏损 1 格
n = 2: 亏损 1 + 2 = 3 格
n = 3: 亏损 1 + 2 + 3 = 6 格
n = 4: 亏损 1 + 2 + 3 + 4 = 10 格
...
n = 10: 亏损 55 格

公式：L(n) = n(n+1)/2
```

这意味着**趋势越强，亏损增长越快**。

2. **网格宽度影响破产时间**

研究发现，网格宽度 g 越大，破产发生得越晚：
- g = 0.6 时：快速破产
- g = 0.9 时：破产延迟，部分模拟盈利

3. **低波动率 + 低漂移是最佳条件**

SDE 模型分析显示，盈利最大化发生在：
- 低波动率（σ）：价格不会剧烈波动
- 低漂移（μ）：没有明显趋势
- 即**区间震荡市场**

### 3. 支持网格交易的观点

尽管数学期望为零，但实践中网格交易仍有其价值：

**（1）震荡市场中确实盈利**

> "令人惊讶的是，如此简单的交易策略在大多数时候都能产生利润，这得益于频繁出现的低波动期。"
> —— Taranto & Khan (2021)

**（2）无限资金假设下必然盈利**

> "如果拥有无限资金和时间，网格交易策略本质上是盈利的。"
> —— arXiv (2025)

这是因为无限资金可以承受任何回撤，等待价格最终回归。

**（3）改进策略可以超越买入持有**

动态网格策略（DGT）通过持续重置网格位置，在 2021-2024 年的 BTC/ETH 回测中显著优于买入持有策略，年化收益 60-70%，最大回撤控制在 50% 左右。

### 4. 结论：有条件地有效

| 条件 | 有效性 |
|-----|-------|
| 震荡市场 + 合理参数 + 严格风控 | ✓ 有效 |
| 趋势市场 | ✗ 无效，亏损累积 |
| 无止损的激进策略 | ✗ 危险，可能破产 |
| 网格过密（手续费吃掉利润） | ✗ 无效 |

**核心前提**：
1. 网格交易适合**震荡市场**，不适合趋势市场
2. 必须设置**止损**或最大亏损限制
3. 网格间距必须**大于手续费**
4. 需要**充足资金**支撑多个同时持仓

---

## 二、网格交易的类型

### 1. 按间距方式分类

#### （1）等差网格（Arithmetic Grid）

**规则**：每格之间的价格差相等（固定金额）。

```
价格区间：90-110 元，5 格

网格价位：90, 95, 100, 105, 110
间距：每格 5 元
```

**计算公式**：

$$网格间距 = \frac{上限价格 - 下限价格}{网格数 - 1}$$

**特点**：
- 每格**利润金额相等**（如每格赚 5 元）
- 低价位和高价位的**收益率不同**（低价位收益率更高）
- 适合**窄幅震荡**、价格绝对变化稳定的市场

**示例**：
```
买入 @ 95 元，卖出 @ 100 元 → 利润 5 元，收益率 5.26%
买入 @ 100 元，卖出 @ 105 元 → 利润 5 元，收益率 5.00%
买入 @ 105 元，卖出 @ 110 元 → 利润 5 元，收益率 4.76%
```

#### （2）等比网格（Geometric Grid）

**规则**：每格之间的价格比相等（固定比例）。

```
价格区间：90-110 元，5 格
比例系数 r = (110/90)^(1/4) ≈ 1.0515（约 5.15%）

网格价位：90, 94.6, 99.5, 104.6, 110
```

**计算公式**：

$$比例系数 = \left(\frac{上限价格}{下限价格}\right)^{\frac{1}{网格数-1}}$$

**特点**：
- 每格**收益率相等**（如每格赚 5.15%）
- 低价位网格更密集，高价位网格更稀疏
- 适合**宽幅波动**、百分比变化稳定的市场

**示例**：
```
买入 @ 90 元，卖出 @ 94.6 元 → 利润 4.6 元，收益率 5.15%
买入 @ 94.6 元，卖出 @ 99.5 元 → 利润 4.9 元，收益率 5.15%
买入 @ 99.5 元，卖出 @ 104.6 元 → 利润 5.1 元，收益率 5.15%
```

#### （3）等差 vs 等比对比

| 维度 | 等差网格 | 等比网格 |
|-----|---------|---------|
| **间距** | 固定金额 | 固定比例 |
| **每格利润** | 金额相等 | 比例相等 |
| **网格分布** | 均匀分布 | 低价位更密集 |
| **适用场景** | 窄幅震荡、稳定品种 | 宽幅波动、高波动品种 |
| **加密货币** | 稳定币对 | BTC、ETH 等 |

**选择建议**：
- 价格波动以**金额**为主 → 等差网格
- 价格波动以**百分比**为主 → 等比网格
- 不确定时 → 等比网格更通用

### 2. 按方向分类

#### （1）做多网格（Long Grid）

只在下方挂买单，适合看涨但不确定短期走势的市场。

```
价格 ▲
     │
 100 │ ═══════════════════ 当前价格
     │
  95 │ ─────────────────── 买入 1
  90 │ ─────────────────── 买入 2
  85 │ ─────────────────── 买入 3
     │
     └─────────────────────────▶
```

**逻辑**：价格下跌时逐步买入，价格回升时逐步卖出。

**风险**：价格持续下跌时，持仓不断增加，亏损累积。

#### （2）做空网格（Short Grid）

只在上方挂卖单，适合看跌但不确定短期走势的市场。

```
价格 ▲
     │
 115 │ ─────────────────── 卖出 3
 110 │ ─────────────────── 卖出 2
 105 │ ─────────────────── 卖出 1
     │
 100 │ ═══════════════════ 当前价格
     │
     └─────────────────────────▶
```

**逻辑**：价格上涨时逐步做空，价格回落时逐步平仓。

**风险**：价格持续上涨时，空头仓位不断增加，亏损无限。

#### （3）中性网格（Neutral Grid）

上下方同时挂单，不预判方向，这是最经典的网格交易形式。

```
价格 ▲
     │
 110 │ ─────────────────── 卖出 2
 105 │ ─────────────────── 卖出 1
 100 │ ═══════════════════ 基准价格
  95 │ ─────────────────── 买入 1
  90 │ ─────────────────── 买入 2
     │
     └─────────────────────────▶
```

**逻辑**：
- 价格上涨 → 触发卖出订单 → 建立空头或卖出持仓
- 价格下跌 → 触发买入订单 → 建立多头或买入持仓
- 价格回归 → 平仓获利

**特点**：内置对冲机制，风险相对较低。

### 3. 特殊类型

#### （1）无限网格（Infinity Grid）

没有上限价格，只设下限和间距。

**适用场景**：长期看涨的资产（如 BTC 长期持有者）

**逻辑**：
- 价格上涨时逐步卖出，锁定利润
- 价格下跌时逐步买回，降低成本
- 永远持有一定仓位，分享长期涨幅

**风险**：如果资产归零，仍会亏损。

#### （2）对冲网格（Hedged Grid）

在现货买入的同时，开立等量的期货空头。

**目的**：消除方向性风险，只赚取网格套利收益。

**示例**：
```
现货：买入 1 BTC @ 50,000
期货：做空 1 BTC @ 50,000
净敞口 = 0

价格涨到 55,000：
- 现货盈利 5,000
- 期货亏损 5,000
- 净盈亏 = 0

但网格交易过程中的买卖差价被保留为利润。
```

**注意**：期货有资金费率成本，需要计入。

---

## 三、与马丁格尔和金字塔的关系

网格交易与我们前面讨论的马丁格尔、金字塔策略有着深刻的联系。

### 1. 三种策略的本质对比

| 维度 | 马丁格尔 | 金字塔 | 网格交易 |
|-----|---------|-------|---------|
| **加仓时机** | 亏损后加仓 | 盈利后加仓 | 固定间距加仓 |
| **方向假设** | 逆势（价格会回归） | 顺势（趋势会延续） | 中性（价格会震荡） |
| **加仓方向** | 单向（逆势） | 单向（顺势） | 双向 |
| **最佳市场** | 震荡市（需回归） | 趋势市 | 震荡市 |
| **风险特征** | 低频大亏损 | 高频小亏损 | 趋势中累积亏损 |
| **盈利特征** | 高频小盈利 | 低频大盈利 | 高频小盈利 |

### 2. 网格交易是马丁格尔的变体

QuantPedia 指出：

> "网格交易是马丁格尔外汇策略的教科书案例。"

**相似之处**：
- 都在价格逆向移动时增加仓位
- 都依赖价格最终回归
- 都面临趋势市场中的巨大风险
- 亏损都可能无限（无止损时）

**区别**：
- 马丁格尔通常**翻倍加仓**，网格交易**等量加仓**
- 马丁格尔是**单向**策略，网格可以**双向**
- 网格交易有明确的**价格区间**和**网格数量**限制

### 3. 三种策略的收益分布

```
马丁格尔收益分布：
频率 ▲
     │████████████████████████
     │████████████████████████  高频小盈利
     │████████████████████████
     │█                         低频大亏损
     └─────────────────────────▶ 收益
      -大亏        0        +小盈

金字塔收益分布：
频率 ▲
     │████████████████████████
     │████████████████████████  高频小亏损
     │████████████████████████
     │                      █   低频大盈利
     └─────────────────────────▶ 收益
      -小亏        0        +大盈

网格交易收益分布：
频率 ▲
     │         ████████████████
     │       ████████████████    震荡市：频繁小盈利
     │     ████████████████
     │█████                      趋势市：累积大亏损
     └─────────────────────────▶ 收益
      -大亏        0        +小盈
```

### 4. 策略选择指南

```
市场状态判断
     │
     ├── 明确趋势 ──────────→ 金字塔加仓
     │
     ├── 区间震荡 ──────────→ 网格交易
     │
     ├── 震荡但预期回归 ────→ 马丁格尔（谨慎）
     │
     └── 不确定 ────────────→ 观望或小仓位测试
```

### 5. 组合使用的可能性

一些交易者尝试将这些策略组合：

**（1）网格 + 趋势过滤**

- 只在 ADX < 25（无趋势）时启用网格
- ADX > 25 时暂停网格，切换为趋势策略

**（2）网格 + 金字塔**

- 震荡市：使用网格交易
- 突破后：转为金字塔加仓

**（3）对冲网格（内置对冲）**

- 本质上是同时使用做多网格和做空网格
- 消除方向性风险

---

## 四、执行机制

### 1. 核心参数设置

#### （1）价格区间

**上限价格**和**下限价格**定义了网格的运作范围。

**设置方法**：

| 方法 | 说明 | 示例 |
|-----|------|------|
| 历史波动 | 参考过去 N 天的最高/最低价 | 过去 30 天高低点 ±10% |
| 技术支撑/阻力 | 使用关键技术位 | 支撑位 90，阻力位 110 |
| ATR 方法 | 基于波动率 | 当前价 ± 3×ATR(14) |
| 布林带 | 使用布林带上下轨 | 2 倍标准差 |

**注意**：
- 区间太窄 → 容易被突破，策略失效
- 区间太宽 → 资金效率低，触发次数少

#### （2）网格数量

网格数量决定了交易的密集程度。

| 网格数 | 间距 | 特点 |
|-------|-----|------|
| 少（5-10） | 大 | 交易频率低，单笔利润高，资金效率高 |
| 多（20-50） | 小 | 交易频率高，单笔利润低，手续费占比高 |

**计算公式（等差网格）**：

$$网格间距 = \frac{上限 - 下限}{网格数 - 1}$$

$$每格利润率 = \frac{网格间距}{买入价格} - 手续费率 \times 2$$

**示例**：
```
价格区间：95-105 元
网格数：11 格
网格间距 = (105-95)/(11-1) = 1 元

在 100 元买入，101 元卖出：
毛利润率 = 1/100 = 1%
手续费 = 0.1% × 2 = 0.2%
净利润率 = 1% - 0.2% = 0.8%
```

#### （3）每格投资金额

**固定金额法**：每格投入相同金额

```
总资金：10,000 元
网格数：10 格
每格投资 = 10,000 / 10 = 1,000 元
```

**固定数量法**：每格买入相同数量

```
总资金：10,000 元
当前价格：100 元
计划持仓：100 股
每格买入 = 100 / 10 = 10 股
```

### 2. 手续费的关键影响

网格交易是**高频策略**，手续费影响巨大。

**手续费计算**：

$$月手续费成本 = 交易次数 \times 单笔手续费率 \times 2$$

**示例**：
```
假设：
- 每月交易 100 次
- 手续费率 0.1%（买卖各一次 = 0.2%）

月手续费成本 = 100 × 0.2% = 20%

如果网格利润只有 25%，那么：
净利润 = 25% - 20% = 5%
```

**关键原则**：

> "网格间距必须显著大于手续费，否则利润会被手续费吞噬。"

**最小间距计算**：

$$最小网格间距 > 手续费率 \times 2 \times 安全系数$$

建议安全系数 ≥ 3，即网格利润至少是手续费的 3 倍。

### 3. 止损与风险控制

网格交易**必须**设置止损，否则一次趋势可能导致破产。

#### （1）区间止损

价格突破网格区间时止损。

```
网格区间：90-110 元
止损设置：
- 下破 88 元 → 全部止损
- 上破 112 元 → 全部止损（如果有空头）
```

#### （2）最大亏损止损

设定账户最大亏损比例。

```
初始资金：10,000 元
最大亏损：20%（2,000 元）
当浮亏达到 2,000 元时，关闭所有网格
```

#### （3）最大持仓限制

限制同方向最大持仓数量。

```
最大持仓：5 格
当已有 5 个买入订单被触发后，不再开新的买入订单
```

#### （4）时间止损

网格运行一段时间后，无论盈亏都重新评估。

```
每运行 7 天，检查：
- 如果盈利 → 继续或提取利润
- 如果亏损 → 评估是否调整参数或关闭
```

### 4. 订单管理

#### （1）挂单 vs 市价单

| 类型 | 优点 | 缺点 |
|-----|------|------|
| **限价挂单** | 精确执行价格，无滑点 | 可能不成交（跳空） |
| **市价单** | 保证成交 | 有滑点，成本更高 |

**建议**：主要使用限价挂单，但要监控跳空风险。

#### （2）订单更新频率

- **静态网格**：订单固定，不随价格移动
- **动态网格**：价格移动后，重新设置网格中心

**动态网格示例**：
```
初始：基准价格 100 元，网格区间 90-110

价格涨到 108 元后：
重新设置网格中心为 108 元
新区间：98-118
```

---

## 五、数学分析

### 1. 盈亏公式

#### （1）单格利润

**等差网格**：

$$单格利润 = 网格间距 \times 交易数量 - 手续费$$

$$单格利润率 = \frac{网格间距}{买入价格} - 手续费率 \times 2$$

**等比网格**：

$$单格利润率 = 比例系数 - 1 - 手续费率 \times 2$$

#### （2）总利润

$$网格总利润 = 单格利润 \times 完成交易次数$$

#### （3）年化收益率

$$年化收益率 = \frac{网格总利润}{总投资} \times \frac{365}{运行天数} \times 100\%$$

### 2. 亏损累积：三角数列

当价格单向移动时，亏损按**三角数列**增长：

$$L(n) = \frac{n(n+1)}{2}$$

其中 n 是价格移动的网格数。

**示例**（每格投入 1,000 元，网格间距 5%）：

| 下跌格数 | 累计亏损（格） | 累计亏损（元） | 增长速度 |
|---------|--------------|--------------|---------|
| 1 | 1 | 50 | - |
| 2 | 3 | 150 | +100 |
| 3 | 6 | 300 | +150 |
| 4 | 10 | 500 | +200 |
| 5 | 15 | 750 | +250 |
| 10 | 55 | 2,750 | - |

**关键洞察**：亏损增长速度越来越快，这就是为什么网格交易在趋势市场中如此危险。

### 3. 盈亏平衡分析

假设网格已经下跌 n 格，需要多少次完整交易才能回本？

$$盈亏平衡交易次数 = \frac{L(n)}{单格利润} = \frac{n(n+1)/2}{单格利润}$$

**示例**：
```
下跌 5 格后，累计亏损 = 15 格 × 利润单位
单格利润 = 1 格利润单位

需要完成 15 次完整买卖才能回本
```

如果价格持续横盘，理论上可以回本。但如果继续下跌，亏损会加速增长。

### 4. 资金需求计算

网格交易需要足够资金支撑所有可能的持仓。

**最大资金需求**（等差网格，做多方向）：

$$最大资金 = \sum_{i=0}^{n-1} 每格金额 \times (下限 + i \times 间距)$$

**简化公式**：

$$最大资金 \approx 每格金额 \times 网格数 \times 平均价格$$

**示例**：
```
网格数：10
每格投入：1,000 元
价格区间：90-110 元
平均价格：100 元

最大资金需求 ≈ 1,000 × 10 = 10,000 元
```

**建议**：预留 1.5-2 倍的计算资金，以应对意外情况。

---

## 六、适用场景与风险

### 1. 适用场景

| 场景 | 适用度 | 原因 |
|-----|-------|------|
| **区间震荡** | ⭐⭐⭐ | 网格交易的最佳环境 |
| **宽幅震荡** | ⭐⭐ | 适用，但需要更宽的网格 |
| **低波动率** | ⭐ | 触发次数少，收益有限 |
| **单边趋势** | ✗ | 不适用，会累积亏损 |
| **高波动突破** | ✗ | 危险，可能快速突破区间 |

**最佳标的特征**：
- 有明确的支撑和阻力位
- 历史上在区间内反复震荡
- 波动率适中（不太高也不太低）
- 流动性充足，手续费低

**适合网格交易的典型标的**：
- 外汇：EUR/USD、USD/JPY 等主要货币对
- 加密货币：BTC/USDT、ETH/USDT（震荡期）
- 指数 ETF：在横盘整理期间

### 2. 主要风险

#### （1）趋势风险——最大威胁

```
风险等级：⭐⭐⭐⭐⭐（致命）

场景：价格单边下跌 20%
后果：
- 所有买入订单被触发
- 亏损按三角数列累积
- 可能损失大部分本金

应对：
- 必须设置止损
- 监控趋势指标（ADX、均线）
- 趋势明确时暂停网格
```

#### （2）突破风险

```
风险等级：⭐⭐⭐⭐

场景：价格突破网格区间后不回头
后果：
- 策略失效
- 持有的仓位持续亏损
- 错过区间外的行情

应对：
- 设置区间外止损
- 突破后考虑重新设置网格
- 或转为趋势策略
```

#### （3）跳空风险

```
风险等级：⭐⭐⭐

场景：重大消息导致价格跳空
后果：
- 止损可能无法在预设价格执行
- 实际亏损大于预期

应对：
- 避开重大事件（财报、央行决议）
- 使用 24/7 交易的市场（加密货币）
- 降低杠杆
```

#### （4）手续费侵蚀

```
风险等级：⭐⭐⭐

场景：网格过密，频繁交易
后果：
- 手续费吃掉大部分利润
- 看似盈利实则亏损

应对：
- 确保网格利润 > 3 倍手续费
- 选择低手续费平台
- 使用限价单而非市价单
```

#### （5）资金占用风险

```
风险等级：⭐⭐

场景：资金被网格占用，错过其他机会
后果：
- 机会成本
- 流动性不足

应对：
- 只用部分资金做网格
- 保留应急资金
- 定期评估资金配置
```

### 3. 风险管理检查清单

在启动网格交易前，确认以下事项：

- [ ] 市场是否处于震荡状态？（ADX < 25）
- [ ] 网格区间是否合理？（基于历史波动）
- [ ] 网格间距是否 > 3 倍手续费？
- [ ] 是否设置了止损？
- [ ] 最大亏损是否可承受？
- [ ] 资金是否充足？（预留 1.5 倍）
- [ ] 是否有重大事件即将发生？

---

## 七、改进方法与实践案例

传统网格的核心问题是**固定区间**——价格突破后策略失效。本节介绍三类改进方法。

### 1. 动态调整类

#### （1）动态网格策略（DGT）

**核心思想**：价格突破边界时，**重置整个网格**，继续运作。

| 维度 | 传统网格 | DGT |
|-----|---------|-----|
| 突破处理 | 停止或止损 | 重置网格继续 |
| 利润处理 | 积累 | 再投资 |
| 被套处理 | 止损或持有 | 保持被套资产，用利润开新网格 |

**关键机制**：

DGT 是**现货做多网格**，不做空。突破时的处理取决于持仓状态：

| 突破方向 | 持仓状态 | 处理方式 |
|---------|---------|---------|
| **向上突破** | 空仓（币已卖光） | 本金 + 利润全额再投资 |
| **向下突破** | 满仓（USDT 已买光） | 被套资产不动，仅用套利利润开新网格 |

**论文结论**：

> DGT "看起来像是买入持有和传统网格的混合"。
> —— arXiv (2025)

- 2021-2024 年 BTC/ETH 回测：年化 60-70%，最大回撤 ~50%
- 优异表现很大程度归功于加密货币整体上涨趋势
- 被套资产在市场反弹时回本；若市场归零，被套资产永久亏损

> **详细机制**：参见 [DGT 论文原文](../references/dgt_arxiv_2506.11921.md)

#### （2）追踪网格（Trailing Grid）

**核心思想**：价格触及边界时，网格**逐格移动**（而非整体重置）。

```
Trailing Up（向上追踪）：
  价格触及上限 → 取消最低买单 → 上方新增卖单 → 网格上移一格

Trailing Down（向下追踪）：
  价格触及下限 → 取消最高卖单 → 下方新增买单 → 网格下移一格
```

**与 DGT 对比**：

| 维度 | DGT | Trailing Grid |
|-----|-----|---------------|
| 调整单位 | 整体重置 | 逐格移动 |
| 资金处理 | 利润再投资 | 保持不变 |
| 实现方式 | 需自行编程 | 交易所内置（Binance/Bybit/OKX） |

#### （3）自适应网格

**核心思想**：通过**惰性参数**和**弹性参数**让网格持续微调。

**惰性参数（Laziness）**：只有价格变动超过阈值才更新信号，过滤噪音。

```
if |价格变动| > 惰性阈值 × 上次价格:
  更新信号
else:
  保持不变
```

**弹性参数（Elasticity）**：网格锚点根据价格与均线关系动态调整。

```
if 价格 > 均线: 锚点上移
if 价格 < 均线: 锚点下移
```

**参数建议**：

| 参数 | 建议值 | 说明 |
|-----|-------|------|
| 惰性阈值 | 2-5% | 太小→噪音多，太大→反应慢 |
| 弹性系数 | 30-70 | 太小→僵化，太大→过敏 |

> **详细机制**：参见 [自适应网格策略](../references/adaptive_grid_medium_sword_red.md)

#### （4）三种动态调整方式对比

| 维度 | DGT | Trailing Grid | 自适应网格 |
|-----|-----|---------------|-----------|
| **触发条件** | 突破边界 | 触及边界 | 持续微调 |
| **调整幅度** | 整体重置 | 一格 | 逐步移动 |
| **调整频率** | 低 | 中 | 高 |
| **复杂度** | 低 | 低 | 高（需调参） |
| **适用场景** | 长期运行 | 趋势跟踪 | 精细控制 |

---

### 2. 风险控制类

#### （1）市场状态过滤

**核心思想**：只在**震荡市**运行网格，趋势市暂停。

| 指标 | 震荡（启用网格） | 趋势（暂停网格） |
|-----|----------------|----------------|
| ADX | < 25 | > 25 |
| 布林带宽度 | 收窄 | 扩张 |
| 均线 | 缠绕 | 发散 |

```
每日检查：
1. ADX < 25 → 继续网格
2. ADX > 25 → 暂停新订单
3. ADX > 30 → 考虑止损
```

#### （2）对冲网格

**核心思想**：现货 + 期货对冲，消除方向性风险。

```
现货：运行做多网格
期货：持有等量空头
净敞口 = 0
盈利来源 = 纯粹的网格套利
```

**优点**：消除方向风险，只赚波动收益
**缺点**：期货有资金费率成本，操作更复杂

---

### 3. 实践案例

#### （1）成功案例：震荡市场中的稳定收益

**场景**：2023 年 Q2，BTC 在 25,000-30,000 美元区间震荡

```
策略设置：
- 区间：25,000-30,000 USDT
- 网格数：20
- 每格投入：500 USDT
- 总投入：10,000 USDT

运行结果（3 个月）：
- 完成交易：150+ 次
- 总利润：~1,200 USDT
- 年化收益：~48%
- 最大回撤：~8%
```

**成功原因**：
- 市场确实在区间内震荡
- 网格间距合理（~2.5%）
- 手续费低（0.1%）

#### （2）失败案例：趋势市场中的亏损

**场景**：2022 年 5 月，LUNA 崩盘

```
策略设置：
- 区间：50-80 USDT
- 网格数：15
- 每格投入：1,000 USDT

灾难过程：
- 价格从 80 跌破 50
- 所有买入订单被触发
- 价格继续跌到 0.0001
- 账户接近归零
```

**教训**：
- 没有设置止损
- 忽视了项目基本面风险
- 网格不适合可能归零的资产

#### （3）改进案例：加入止损后的表现

**同样的 2022 年 5 月场景，但加入止损**：

```
策略设置：
- 区间：50-80 USDT
- 网格数：15
- 止损：45 USDT

执行结果：
- 价格跌破 45 时触发止损
- 亏损 ~15%（而非 99%+）
- 保留了大部分本金
- 可以在其他机会中恢复
```

---

## 核心结论

### 1. 网格交易的本质

- 网格交易是一种**依赖波动**而非方向的策略
- 数学期望为零，**长期必然破产**（无止损时）
- 但在**震荡市场**中可以稳定盈利
- 是**马丁格尔策略的变体**

### 2. 适用条件

| 条件 | 要求 |
|-----|------|
| 市场状态 | 震荡，非趋势 |
| 网格间距 | > 3 倍手续费 |
| 资金 | 足够支撑所有持仓 |
| 止损 | 必须设置 |
| 监控 | 定期检查市场状态 |

### 3. 与马丁格尔、金字塔的关系

| 策略 | 加仓逻辑 | 最佳市场 | 核心风险 |
|-----|---------|---------|---------|
| 马丁格尔 | 亏损加仓 | 震荡（需回归） | 趋势中破产 |
| 金字塔 | 盈利加仓 | 趋势市 | 趋势反转 |
| 网格交易 | 固定间距 | 震荡市 | 趋势中亏损累积 |

### 4. 关键执行原则

1. **必须止损**：没有止损的网格交易是赌博
2. **选对市场**：只在震荡市场使用
3. **控制间距**：确保利润覆盖手续费
4. **限制仓位**：不要过度暴露
5. **定期评估**：市场变化时调整或退出

---

## 延伸阅读

**理论基础**：
- [趋势与动量策略](../core/05_trend_and_momentum.md) — 趋势市场的替代策略
- [套利策略](../core/07_arbitrage_strategies.md) — 其他利用价差的策略

**相关策略**：
- [马丁格尔策略](01_martingale.md) — 逆势加仓的原型
- [金字塔加仓策略](02_pyramiding.md) — 顺势加仓的对比

**学术文献**：
- Taranto, A. & Khan, S. (2021). [Application of Bi-Directional Grid Constrained Stochastic Processes to Algorithmic Trading](https://thescipub.com/pdf/jmssp.2021.22.29.pdf). Journal of Mathematics and Statistics.
- Taranto, A. & Khan, S. (2020). [Gambler's ruin problem and bi-directional grid constrained trading and investment strategies](https://www.businessperspectives.org/journals/investment-management-and-financial-innovations/issue-360/gambler-s-ruin-problem-and-bi-directional-grid-constrained-trading-and-investment-strategies). Investment Management and Financial Innovations.
- arXiv (2025). [Dynamic Grid Trading Strategy: From Zero Expectation to Market Outperformance](https://arxiv.org/html/2506.11921v1).
- QuantPedia (2021). [A Primer on Grid Trading Strategy](https://quantpedia.com/a-primer-on-grid-trading-strategy/).
