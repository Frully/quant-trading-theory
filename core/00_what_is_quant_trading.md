# 第零篇：什么是量化交易？

> "量化交易是用数学模型和计算机程序系统性地发现、执行和管理投资机会的方法。"

---

## 引言：为什么从这里开始？

在深入探讨量化交易的理论基础之前，我们需要先回答一个看似简单的问题：

**什么是量化交易？它与传统投资有什么本质区别？**

这个问题的答案将决定我们后续所有讨论的框架和方向。

---

## 一、量化交易的定义

### 1.1 核心定义

**量化交易 (Quantitative Trading)** 是一种投资方法，其核心特征是：

> 使用**数学模型**、**统计方法**和**计算机程序**来系统性地识别投资机会、做出交易决策、执行交易和管理风险。

**关键词解析**：

| 关键词 | 含义 | 与传统投资的区别 |
|-------|------|-----------------|
| **数学模型** | 用公式描述市场规律 | 而非直觉或经验判断 |
| **统计方法** | 从数据中发现模式 | 而非故事或叙事 |
| **计算机程序** | 自动化执行 | 而非人工操作 |
| **系统性** | 有明确规则，可重复 | 而非随机或主观 |

### 1.2 更精确的定义

从学术和实践角度，量化交易可以定义为：

$$\text{量化交易} = f(\text{数据}, \text{模型}, \text{执行}, \text{风控})$$

其中：
- **数据**：市场价格、财务报表、另类数据等
- **模型**：将数据转化为交易信号的规则
- **执行**：将信号转化为实际交易的过程
- **风控**：管理和限制风险的机制

---

## 二、量化交易 vs 传统投资

### 2.1 决策方式的根本区别

```
传统投资的决策流程：

信息 ──► 人脑分析 ──► 判断 ──► 决策 ──► 执行
           │
           └─► 受情绪、偏见、疲劳影响


量化投资的决策流程：

数据 ──► 模型处理 ──► 信号 ──► 规则执行 ──► 交易
           │
           └─► 客观、一致、可扩展
```

### 2.2 系统性对比

| 维度 | 传统投资 | 量化投资 |
|-----|---------|---------|
| **决策依据** | 经验、直觉、故事 | 数据、模型、统计 |
| **可解释性** | "我觉得..." | "因为指标 X > 阈值 Y" |
| **可重复性** | 依赖个人 | 可程序化复制 |
| **可回测性** | 难以验证历史表现 | 可系统回测 |
| **情绪影响** | 恐惧、贪婪影响决策 | 规则消除情绪 |
| **容量** | 受人力限制 | 可同时管理大量标的 |
| **一致性** | 可能前后不一 | 严格遵循规则 |
| **速度** | 人类反应速度 | 毫秒级（高频）到日级 |

### 2.3 并非二元对立

需要强调的是，量化与主观并非完全对立：

```
投资方法光谱：

纯主观                                              纯量化
   │                                                  │
   ▼                                                  ▼
┌─────┬─────────┬────────────┬─────────────┬─────────┐
│纯直觉│基本面  │量化辅助的 │ 系统化量化 │ 高频算法│
│投资  │分析    │主动管理   │ 策略       │ 交易    │
└─────┴─────────┴────────────┴─────────────┴─────────┘
   │         │           │            │          │
巴菲特    彼得·林奇  多数对冲基金  AQR/Two Sigma  Citadel
（早期）                                        Securities
```

---

## 三、量化交易的核心要素

### 3.1 要素总览

```
量化交易系统的核心要素：

                    ┌─────────────────────────────────┐
                    │         量化交易系统             │
                    └─────────────────────────────────┘
                                   │
        ┌──────────────┬──────────┴──────────┬──────────────┐
        │              │                     │              │
        ▼              ▼                     ▼              ▼
    ┌───────┐     ┌───────┐             ┌───────┐     ┌───────┐
    │ Alpha │     │  风险  │             │  执行  │     │ 组合  │
    │ 模型  │     │  模型  │             │  系统  │     │ 构建  │
    └───────┘     └───────┘             └───────┘     └───────┘
        │              │                     │              │
        ▼              ▼                     ▼              ▼
    预测收益       度量风险              最优执行        权重分配
    发现机会       控制敞口              最小成本        目标实现
```

### 3.2 Alpha 模型

**定义**：预测资产未来收益的模型。

**核心问题**：什么因素能预测未来收益？

**Alpha 来源分类**：

| 类型 | 描述 | 例子 |
|-----|------|------|
| **价格动量** | 过去涨的继续涨 | 52周新高策略 |
| **价值因子** | 便宜的跑赢贵的 | 低 P/E、高 B/P |
| **质量因子** | 好公司跑赢差公司 | 高 ROE、低负债 |
| **情绪因子** | 利用市场情绪 | 新闻情感、社交媒体 |
| **技术因子** | 价格模式 | 均线、RSI |
| **事件驱动** | 特定事件后的规律 | 财报后漂移 |
| **统计套利** | 价格关系回归 | 配对交易 |

**数学表达**：

$$\alpha_i = E[r_i] - \beta_i \cdot E[r_m]$$

其中：
- $\alpha_i$ = 资产 $i$ 的超额收益（Alpha）
- $E[r_i]$ = 资产 $i$ 的期望收益
- $\beta_i$ = 资产 $i$ 对市场的敏感度
- $E[r_m]$ = 市场期望收益

### 3.3 风险模型

**定义**：度量和管理投资组合风险的框架。

**核心问题**：我们暴露了哪些风险？愿意承担多少？

**风险的多维度**：

```
风险的层次结构：

总风险
   │
   ├─► 系统性风险（不可分散）
   │       │
   │       ├─► 市场风险（Beta）
   │       ├─► 行业风险
   │       ├─► 风格风险（价值/成长）
   │       └─► 宏观风险（利率、汇率）
   │
   └─► 特异性风险（可分散）
           │
           └─► 个股特有风险
```

**常用风险度量**：

以下是量化投资中最常用的风险指标：

| 指标 | 公式 | 含义 |
|-----|------|------|
| **波动率** | $\sigma = \sqrt{\text{Var}(r)}$ | 收益的离散程度 |
| **VaR** | $P(Loss > VaR) = \alpha$ | α 概率下的最大损失 |
| **最大回撤** | $MDD = \max(Peak - Trough)$ | 历史最大亏损幅度 |
| **Beta** | $\beta = \frac{Cov(r_i, r_m)}{Var(r_m)}$ | 对市场的敏感度 |
| **跟踪误差** | $TE = \sigma(r_p - r_b)$ | 偏离基准的波动 |

**通俗解释**：
- **波动率**：收益上下波动的幅度。波动率 20% 意味着收益大约在 ±20% 范围内波动
- **VaR（风险价值）**：在给定概率下可能遭受的最大损失。例如"95% VaR = 100万"意味着有 95% 的把握损失不会超过 100 万
- **最大回撤**：从历史最高点到最低点的最大跌幅。投资者最直观感受到的"最惨时刻"
- **Beta**：投资组合相对于市场的敏感度。β=1.2 意味着市场涨 10%，组合预期涨 12%；市场跌 10%，组合预期跌 12%
- **跟踪误差**：投资组合收益与基准收益之差的波动率，衡量"偏离基准"的程度

### 3.4 执行系统

**定义**：将交易信号转化为实际市场交易的过程。

**核心问题**：如何以最低成本、最小冲击完成交易？

**执行成本分解**：

```
总执行成本 = 显性成本 + 隐性成本

显性成本：
├─ 佣金
├─ 交易所费用
└─ 税费

隐性成本：
├─ 买卖价差
├─ 市场冲击
├─ 时机成本
└─ 机会成本（未成交）
```

**执行策略分类**：

当需要买入或卖出大量股票时，如何拆分订单是关键问题。常用策略：

| 策略 | 全称 | 目标 | 适用场景 |
|-----|------|------|---------|
| **TWAP** | Time-Weighted Average Price | 时间均匀分布 | 降低时机风险 |
| **VWAP** | Volume-Weighted Average Price | 跟踪成交量分布 | 减少冲击 |
| **IS** | Implementation Shortfall | 最小化实施差额 | 紧急交易 |

**例子**：你需要在一天内买入 100 万股某股票。
- **TWAP**：把订单均匀分成 N 份，每隔固定时间执行一份。比如每 10 分钟买入一批，不管市场成交量多少
- **VWAP**：跟踪市场成交量分布。上午成交活跃就多买，中午清淡就少买，目标是让成交均价接近全天的成交量加权均价
- **IS**：尽快完成交易，接受较高的市场冲击，但避免价格继续上涨带来的机会成本

### 3.5 组合构建

**定义**：确定各资产权重以实现投资目标。

**核心问题**：如何分配资金以最大化风险调整后收益？

**经典框架：均值-方差优化**

$$\max_w \quad w'\mu - \frac{\lambda}{2} w'\Sigma w$$

约束条件：
$$\sum w_i = 1, \quad w_i \geq 0 \text{（若禁止做空）}$$

其中：
- $w$ = 权重向量
- $\mu$ = 预期收益向量
- $\Sigma$ = 协方差矩阵
- $\lambda$ = 风险厌恶系数

**实践中的考量**：

| 维度 | 理论 | 实践调整 |
|-----|------|---------|
| 估计误差 | 精确知道 μ, Σ | 使用收缩估计、贝叶斯方法 |
| 交易成本 | 忽略 | 加入换手率惩罚 |
| 约束条件 | 简单 | 行业/风格/个股上限 |
| 再平衡 | 连续 | 设置阈值，降低换手 |

---

## 四、量化交易的分类

### 4.1 按时间频率分类

```
交易频率光谱：

持有期: 微秒    毫秒    秒    分钟    天    周    月    年
         │       │      │      │      │     │     │     │
         ▼       ▼      ▼      ▼      ▼     ▼     ▼     ▼
      ┌─────────────────┐ ┌─────────────┐ ┌─────────────────┐
      │    高频交易     │ │  中频交易   │ │    低频量化      │
      │ (HFT)          │ │            │ │                 │
      └─────────────────┘ └─────────────┘ └─────────────────┘
           │                    │                  │
      做市、套利          日内动量           因子投资
      延迟套利            统计套利           价值/动量
```

**各频率特征对比**：

| 维度 | 高频 (HFT) | 中频 | 低频 |
|-----|-----------|------|------|
| **持有期** | 微秒~分钟 | 分钟~天 | 天~年 |
| **换手率** | 极高 | 高 | 低~中 |
| **容量** | 小 | 中 | 大 |
| **Alpha 衰减** | 极快 | 快 | 慢 |
| **技术要求** | 极高 | 高 | 中 |
| **资金门槛** | 高 | 中 | 低 |
| **主要玩家** | Citadel, Jump | 量化对冲基金 | AQR, 公募量化 |

### 4.2 按策略类型分类

**主要策略类别**：

```
量化策略分类树：

量化策略
    │
    ├─► 方向性策略
    │       │
    │       ├─► 因子投资（价值、动量、质量...）
    │       ├─► 趋势跟踪（CTA）
    │       └─► 宏观量化
    │
    ├─► 相对价值/套利
    │       │
    │       ├─► 统计套利（配对交易）
    │       ├─► 指数套利
    │       ├─► 可转债套利
    │       └─► 期现套利
    │
    ├─► 做市策略
    │       │
    │       └─► 提供流动性，赚取买卖价差
    │
    └─► 事件驱动
            │
            ├─► 财报事件
            ├─► 并购套利
            └─► 指数再平衡
```

### 4.3 按 Alpha 来源分类

| Alpha 来源 | 描述 | 持续性 | 竞争程度 |
|-----------|------|--------|---------|
| **风险溢价** | 承担系统性风险的补偿 | 高 | 低 |
| **行为偏差** | 利用投资者非理性 | 中 | 中 |
| **结构性** | 利用市场制度/规则 | 中高 | 中 |
| **信息优势** | 更快/更好的信息 | 低 | 极高 |
| **技术优势** | 更快的执行 | 低 | 极高 |

---

## 五、量化交易的历史演进

### 5.1 发展时间线

```
量化交易发展简史：

1952        1964        1973         1988        1998        2007        2010s       2020s
 │           │           │            │           │           │           │           │
 ▼           ▼           ▼            ▼           ▼           ▼           ▼           ▼
Markowitz   CAPM      Black-Scholes  第一批     LTCM       量化危机   机器学习    AI/大模型
均值方差     资本资产   期权定价      量化基金   崩盘       (Quant      兴起       时代
            定价模型                 成立                  Meltdown)

            │           │            │           │           │           │
            ▼           ▼            ▼           ▼           ▼           ▼
         理论奠基    衍生品革命    产业化      风险警示    策略拥挤    新范式
```

### 5.2 关键里程碑

| 年份 | 事件 | 意义 |
|-----|------|------|
| **1952** | Markowitz 发表均值-方差理论 | 投资组合理论诞生 |
| **1964** | Sharpe 提出 CAPM | 风险定价理论基础 |
| **1973** | Black-Scholes 公式 | 期权定价革命 |
| **1988** | D.E. Shaw 成立 | 现代量化对冲基金先驱 |
| **1994** | Renaissance 的大奖章基金 | 量化交易的巅峰代表 |
| **1998** | LTCM 崩盘 | 模型风险与杠杆的警示 |
| **2007** | Quant Meltdown | 策略拥挤风险的教训 |
| **2010s** | 机器学习应用 | 从规则到学习的范式转变 |
| **2020s** | 另类数据爆发 | 卫星图像、NLP、传感器数据 |

### 5.3 行业格局

**主要量化机构**：

| 类型 | 代表机构 | 特点 |
|-----|---------|------|
| **纯量化对冲基金** | Renaissance, Two Sigma, D.E. Shaw | 全量化，高保密 |
| **系统化多策略** | Citadel, Millennium | 多团队，多策略 |
| **量化资管** | AQR, Dimensional | 因子投资，规模大 |
| **高频做市** | Virtu, Jump, Jane Street | 做市为主，技术极致 |
| **量化公募/私募** | 各大公募量化部、百亿私募 | 相对收益为主 |

---

## 六、量化交易的核心挑战

### 6.1 挑战总览

```
量化交易面临的核心挑战：

┌─────────────────────────────────────────────────────────────┐
│                      核心挑战                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. Alpha 发现与衰减                                         │
│     - 如何找到有效的预测因子？                                │
│     - 如何应对策略拥挤和 Alpha 衰减？                         │
│                                                             │
│  2. 过拟合与样本外失效                                        │
│     - 如何区分真实规律与数据噪音？                            │
│     - 如何确保模型泛化能力？                                  │
│     例：策略在历史数据上年化50%，实盘运行3个月亏损20%          │
│                                                             │
│  3. 执行与容量                                               │
│     - 如何在不影响市场的情况下执行？                          │
│     - 策略能容纳多少资金？                                    │
│                                                             │
│  4. 风险管理                                                 │
│     - 如何度量尾部风险？                                      │
│     - 如何应对模型失效？                                      │
│                                                             │
│  5. 技术与基础设施                                           │
│     - 数据质量与处理                                         │
│     - 系统稳定性与延迟                                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 Alpha 的根本问题

这是量化交易最核心的问题：

**为什么会存在 Alpha？**

```
Alpha 存在性的逻辑链：

如果市场完全有效（EMH）
        │
        ▼
所有信息都已反映在价格中
        │
        ▼
无法系统性地战胜市场
        │
        ▼
Alpha 不存在
        │
        ▼
量化交易毫无意义？

但现实是：
- 有些量化基金确实长期跑赢市场
- 存在可复制的因子溢价
- 行为偏差确实存在

这意味着：
市场效率是一个程度问题，而非绝对
```

**这正是下一篇要深入探讨的问题。**

---

## 七、量化交易的工作流程

### 7.1 完整流程图

```
量化策略开发与运行流程：

┌──────────────────────────────────────────────────────────────┐
│                     1. 研究阶段                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   想法产生 ──► 数据获取 ──► 因子构建 ──► 回测验证 ──► 统计检验│
│      │           │           │           │           │      │
│   学术论文     历史数据     信号计算     模拟交易    显著性    │
│   市场观察     另类数据     特征工程     收益曲线    稳健性    │
│   直觉假设                                                   │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                     2. 验证阶段                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   样本外测试 ──► 参数敏感性 ──► 情景分析 ──► 压力测试        │
│      │              │            │            │              │
│   holdout        参数扫描     历史危机     极端情况          │
│   walk-forward   稳定性       regime       流动性枯竭        │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                     3. 实盘阶段                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   纸面交易 ──► 小资金实盘 ──► 逐步放量 ──► 持续监控         │
│      │            │             │            │               │
│   模拟环境     验证执行       容量测试     业绩归因          │
│   无真实成本   实际滑点       冲击成本     异常检测          │
│                                                              │
└──────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                     4. 迭代阶段                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│   业绩回顾 ──► 策略诊断 ──► 改进优化 ──► 重新验证           │
│      │           │           │            │                  │
│   定期评估    衰减检测     参数更新     完整流程              │
│   归因分析    失效判断     新因子       重新开始              │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### 7.2 关键环节详解

**回测的核心原则**：

| 原则 | 说明 | 违反后果 |
|-----|------|---------|
| **避免前视偏差** | 不使用未来信息 | 虚假收益 |
| **考虑生存偏差** | 包含退市股票 | 高估收益 |
| **计入真实成本** | 佣金、滑点、冲击 | 纸上富贵 |
| **样本外验证** | 留出测试数据 | 过拟合 |
| **多市场验证** | 跨市场、跨时期 | 数据挖掘 |

**前视偏差例子**：用年报数据做回测时，财报在 3 月底才发布，但回测程序却在 1 月 1 日就用了这些数据。这等于"偷看"了未来，实盘不可能复现。

**生存偏差例子**：只用当前还在交易的股票做回测，忽略了那些已经退市（可能是破产）的股票。这会高估策略收益，因为"死掉"的股票往往亏损最大。

---

## 八、量化交易的核心公式

### 8.1 收益与风险

**夏普比率（风险调整后收益）**：

$$SR = \frac{E[R_p] - R_f}{\sigma_p}$$

> **通俗理解**：夏普比率 = 超额收益 / 波动率，衡量"每承担一单位风险，能获得多少超额收益"。
> - SR = 1.0：承担 1% 的波动，获得 1% 的超额收益，属于不错的策略
> - SR = 2.0：承担 1% 的波动，获得 2% 的超额收益，属于优秀策略
> - SR > 3.0：非常罕见，需警惕数据问题或过拟合

**信息比率（相对收益的风险调整）**：

$$IR = \frac{E[R_p - R_b]}{TE}$$

**基本定律（Fundamental Law of Active Management）**：

$$IR \approx IC \times \sqrt{BR}$$

其中：
- $IC$ = 信息系数（预测能力）
- $BR$ = 广度（独立决策次数）

**解读**：
- 可以通过提高预测精度（IC）获得更好表现
- 也可以通过增加独立投资机会（BR）获得更好表现
- 高频交易选择高 BR，低频选择高 IC

**例子**：
- **巴菲特式投资**：IC 很高（精挑细选，预测准确），BR 很低（一年只做几笔交易）
- **高频做市**：IC 很低（每笔交易预测能力微弱），BR 极高（每天成千上万笔交易），通过大量独立决策累积优势

### 8.2 因子模型

**单因子模型（CAPM）**：

$$R_i - R_f = \alpha_i + \beta_i(R_m - R_f) + \epsilon_i$$

**多因子模型（一般形式）**：

$$R_i - R_f = \alpha_i + \sum_{k=1}^{K} \beta_{ik} f_k + \epsilon_i$$

**Fama-French 三因子**：

$$R_i - R_f = \alpha_i + \beta_i^{MKT}(R_m - R_f) + \beta_i^{SMB} \cdot SMB + \beta_i^{HML} \cdot HML + \epsilon_i$$

其中：
- **SMB (Small Minus Big)**：小盘股收益减去大盘股收益，捕捉规模效应
- **HML (High Minus Low)**：高账面市值比股票收益减去低账面市值比股票收益，捕捉价值效应

**通俗理解**：这个模型认为股票收益可以被三个因素解释——市场涨跌（MKT）、公司大小（SMB）、估值高低（HML）。扣除这三个因素后剩下的 α，才是真正的超额收益。

---

## 九、学习路径建议

### 9.1 知识体系

```
量化交易知识体系：

                    ┌─────────────────┐
                    │    量化交易     │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
    ┌─────────┐        ┌─────────┐        ┌─────────┐
    │数学基础 │        │金融理论 │        │技术实现 │
    └────┬────┘        └────┬────┘        └────┬────┘
         │                  │                   │
    ┌────┴────┐        ┌────┴────┐        ┌────┴────┐
    │         │        │         │        │         │
    ▼         ▼        ▼         ▼        ▼         ▼
 概率统计  优化理论  资产定价  行为金融  编程语言  数据处理
 时间序列  机器学习  投资组合  市场微观  回测框架  系统架构
 随机过程            衍生品            执行系统  数据库
```

### 9.2 推荐学习顺序

| 阶段 | 内容 | 目标 |
|-----|------|------|
| **基础** | 概率统计、Python、金融市场基础 | 建立根基 |
| **进阶** | 资产定价理论、因子模型、回测方法 | 理解框架 |
| **深入** | 行为金融、市场微观结构、执行算法 | 专业深度 |
| **实践** | 策略开发、实盘交易、风险管理 | 实战能力 |
| **前沿** | 机器学习、另类数据、新兴方法 | 持续进化 |

---

## 十、本系列的结构

本系列将系统性地探讨量化交易的理论基础：

```
系列结构：

第零篇（本篇）
    │
    └─► 什么是量化交易？（定义、要素、流程）
           │
           ▼
第一篇 ─► 为什么存在超额收益？
           │
           ├─► 市场效率假说（EMH）
           ├─► 行为金融学
           ├─► 限制套利
           └─► 适应性市场假说（AMH）
           │
           ▼
第二篇 ─► 因子投资的理论基础
           │
           ├─► 因子的定义与分类
           ├─► 经典因子详解
           └─► 因子的理论解释
           │
           ▼
后续篇章 ─► 更多主题...
           │
           ├─► 组合构建
           ├─► 执行算法
           ├─► 风险管理
           └─► ...
```

---

## 小结

本篇建立了量化交易的基础框架：

1. **定义**：量化交易是用数学模型和程序系统性地投资
2. **核心要素**：Alpha 模型、风险模型、执行系统、组合构建
3. **分类**：按频率（高/中/低频）、按策略（方向/套利/做市）
4. **挑战**：Alpha 发现、过拟合、执行、风险管理
5. **流程**：研究 → 验证 → 实盘 → 迭代

**下一篇的核心问题**：

> 如果市场是有效的，为什么会存在 Alpha？如果市场不是有效的，无效性来自哪里？

这是量化交易最根本的理论问题，我们将在下一篇深入探讨。

---

## 参考文献

1. Markowitz, H. (1952). "Portfolio Selection." *Journal of Finance*.
2. Sharpe, W. F. (1964). "Capital Asset Prices." *Journal of Finance*.
3. Fama, E. F. (1970). "Efficient Capital Markets: A Review." *Journal of Finance*.
4. Grinold, R. C., & Kahn, R. N. (1999). *Active Portfolio Management*.
5. Narang, R. K. (2013). *Inside the Black Box: A Simple Guide to Quantitative and High Frequency Trading*.
6. Chan, E. P. (2009). *Quantitative Trading: How to Build Your Own Algorithmic Trading Business*.
7. De Prado, M. L. (2018). *Advances in Financial Machine Learning*.
